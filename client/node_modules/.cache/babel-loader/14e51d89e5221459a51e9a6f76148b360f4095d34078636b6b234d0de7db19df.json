{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Muhammet\\\\Desktop\\\\galerio-app\\\\client\\\\src\\\\HomePage.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// // import React, { useState, useEffect, useCallback } from 'react'; // <-- 1. useCallback'i import edin\n// // import axios from 'axios';\n// // import { useNavigate } from 'react-router-dom';\n// // import { jwtDecode } from 'jwt-decode';\n// // import './HomePage.css'; \n// // import ChatModal from './ChatModal';\n// // import { socket } from './socket';\n\n// // function HomePage() {\n// //   const [vehicles, setVehicles] = useState([]);\n// //   const [isLoading, setIsLoading] = useState(true);\n// //   const navigate = useNavigate();\n\n// //   const [selectedVehicleForDetails, setSelectedVehicleForDetails] = useState(null);\n// //   const [selectedVehicleForChat, setSelectedVehicleForChat] = useState(null);\n\n// //   const [userFullName, setUserFullName] = useState('');\n\n// //   // --- 2. DEĞİŞİKLİK: handleLogout fonksiyonunu useCallback ile sarmalayın ---\n// //   // Bu, fonksiyonun gereksiz yere yeniden oluşturulmasını engeller ve sabit bir referans sağlar.\n// //   const handleLogout = useCallback(() => {\n// //     socket.disconnect(); \n// //     localStorage.removeItem('token');\n// //     navigate('/');\n// //   }, [navigate]); // navigate, bu fonksiyonun tek bağımlılığıdır.\n\n// //   useEffect(() => {\n// //     const token = localStorage.getItem('token');\n// //     if (token) {\n// //         try {\n// //             const decodedToken = jwtDecode(token);\n// //             setUserFullName(decodedToken.name); \n// //         } catch (error) {\n// //             console.error(\"Geçersiz token, çıkış yapılıyor.\", error);\n// //             handleLogout(); // Artık sabit olan fonksiyonu burada güvenle kullanabiliriz.\n// //         }\n// //     } else {\n// //         navigate('/');\n// //     }\n\n// //     const fetchAllVehicles = async () => {\n// //       try {\n// //         const response = await axios.get('http://localhost:5000/api/vehicles');\n// //         setVehicles(response.data);\n// //       } catch (error) {\n// //         console.error(\"Araçlar çekilirken hata oluştu:\", error);\n// //       } finally {\n// //         setIsLoading(false);\n// //       }\n// //     };\n// //     fetchAllVehicles();\n\n// //   // --- 3. DEĞİŞİKLİK: handleLogout'u bağımlılık dizisine ekleyin ---\n// //   // Artık sabit bir fonksiyon olduğu için, bunu yapmak güvenlidir ve uyarıyı ortadan kaldırır.\n// //   }, [navigate, handleLogout]); \n\n// //   const openDetailsModal = async (vehicleId) => {\n// //     try {\n// //       const response = await axios.get(`http://localhost:5000/api/vehicles/${vehicleId}`);\n// //       setSelectedVehicleForDetails(response.data);\n// //     } catch (error) {\n// //       alert(\"Araç detayları yüklenirken bir hata oluştu.\");\n// //     }\n// //   };\n// //   const closeDetailsModal = () => setSelectedVehicleForDetails(null);\n\n// //   const openChatModal = (vehicle) => {\n// //     if (vehicle) {\n// //         closeDetailsModal(); \n// //         setSelectedVehicleForChat(vehicle); \n// //     }\n// //   };\n// //   const closeChatModal = () => setSelectedVehicleForChat(null);\n\n// //   if (isLoading) return <div className=\"loading-container\">İlanlar Yükleniyor...</div>;\n\n// //   return (\n// //     <div className=\"home-page-container\">\n// //       <header className=\"home-header\">\n// //         <h1 className=\"brand-title\">\n// //           {userFullName \n// //             ? `Merhaba ${userFullName}, Bayramlar Auto Araç İlanlarına Hoş Geldiniz.`\n// //             : 'Bayramlar Auto Araç İlanlarına Hoş Geldiniz.'\n// //           }\n// //         </h1>\n// //         <button onClick={handleLogout} className=\"logout-button\">Çıkış Yap</button>\n// //       </header>\n\n// //       {/* ... (kodun geri kalanı aynı) ... */}\n// //       <main className=\"vehicle-gallery\">\n// //         {vehicles.map(vehicle => (\n// //           <div key={vehicle.id} className=\"vehicle-card-item\" onClick={() => openDetailsModal(vehicle.id)}>\n// //             <div className=\"card-image-container\">\n// //               <img \n// //                 src={vehicle.photo_url ? `http://localhost:5000/${vehicle.photo_url}` : 'https://via.placeholder.com/400x300?text=Resim+Yok'} \n// //                 alt={`${vehicle.brand} ${vehicle.model}`}\n// //               />\n// //             </div>\n// //             <div className=\"card-content\">\n// //               <h3 className=\"vehicle-title\">{vehicle.brand} {vehicle.model}</h3>\n// //               <p className=\"vehicle-specs\">{vehicle.year} • {vehicle.mileage?.toLocaleString('tr-TR')} km • {vehicle.fuel}</p>\n// //               <div className=\"vehicle-price\">{parseFloat(vehicle.sale_price).toLocaleString('tr-TR', { style: 'currency', currency: 'TRY' })}</div>\n// //             </div>\n// //           </div>\n// //         ))}\n// //       </main>\n\n// //       {selectedVehicleForDetails && (\n// //         <VehicleDetailModal \n// //           vehicle={selectedVehicleForDetails} \n// //           closeModal={closeDetailsModal} \n// //           openChat={() => openChatModal(selectedVehicleForDetails)}\n// //         />\n// //       )}\n\n// //       {/* {selectedVehicleForChat && (\n// //         <ChatModal \n// //           vehicle={selectedVehicleForChat} \n// //           closeModal={closeChatModal} \n// //         />\n// //       )} */}\n// //       {selectedVehicleForChat && (\n// //         <ChatModal \n// //           key={selectedVehicleForChat.id} // <-- EN ÖNEMLİ DÜZELTME BU SATIRDIR!\n// //           vehicle={selectedVehicleForChat} \n// //           closeModal={closeChatModal} \n// //         />\n// //       )}\n// //     </div>\n// //   );\n// // }\n\n// // // ... VehicleDetailModal bileşeni aynı kalabilir ...\n// // function VehicleDetailModal({ vehicle, closeModal, openChat }) {\n// //   const [currentImageIndex, setCurrentImageIndex] = useState(0);\n\n// //   const nextImage = (e) => {\n// //     e.stopPropagation();\n// //     setCurrentImageIndex(prev => (prev === vehicle.photos.length - 1 ? 0 : prev + 1));\n// //   };\n// //   const prevImage = (e) => {\n// //     e.stopPropagation();\n// //     setCurrentImageIndex(prev => (prev === 0 ? vehicle.photos.length - 1 : prev - 1));\n// //   };\n\n// //   return (\n// //     <div className=\"modal-overlay\" onClick={closeModal}>\n// //       <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n// //         <button className=\"modal-close-btn\" onClick={closeModal}>×</button>\n// //         <div className=\"modal-body\">\n// //           <div className=\"modal-images-section\">\n// //             {vehicle.photos && vehicle.photos.length > 0 ? (\n// //               <div className=\"image-gallery\">\n// //                 <div className=\"main-image-container\">\n// //                   <img src={`http://localhost:5000/${vehicle.photos[currentImageIndex].photo_url}`} alt=\"Ana Araç\" className=\"main-image\" />\n// //                   {vehicle.photos.length > 1 && (\n// //                     <>\n// //                       <button className=\"image-nav-btn prev\" onClick={prevImage}>‹</button>\n// //                       <button className=\"image-nav-btn next\" onClick={nextImage}>›</button>\n// //                     </>\n// //                   )}\n// //                 </div>\n// //                 {vehicle.photos.length > 1 && (\n// //                   <div className=\"thumbnail-container\">\n// //                     {vehicle.photos.map((photo, index) => (\n// //                       <img key={photo.id} src={`http://localhost:5000/${photo.photo_url}`} alt={`Thumbnail ${index + 1}`}\n// //                            className={`thumbnail ${index === currentImageIndex ? 'active' : ''}`}\n// //                            onClick={(e) => { e.stopPropagation(); setCurrentImageIndex(index); }} />\n// //                     ))}\n// //                   </div>\n// //                 )}\n// //               </div>\n// //             ) : <p>Bu araç için fotoğraf bulunmamaktadır.</p>}\n// //           </div>\n// //           <div className=\"modal-info-section\">\n// //             <h2 className=\"vehicle-modal-title\">{vehicle.brand} {vehicle.model}</h2>\n// //             <div className=\"vehicle-details-grid\">\n// //               <div className=\"detail-item\"><span className=\"detail-label\">Yıl:</span><span className=\"detail-value\">{vehicle.year}</span></div>\n// //               <div className=\"detail-item\"><span className=\"detail-label\">Kilometre:</span><span className=\"detail-value\">{vehicle.mileage?.toLocaleString('tr-TR')} km</span></div>\n// //               <div className=\"detail-item\"><span className=\"detail-label\">Yakıt:</span><span className=\"detail-value\">{vehicle.fuel}</span></div>\n// //               <div className=\"detail-item\"><span className=\"detail-label\">Vites:</span><span className=\"detail-value\">{vehicle.gear}</span></div>\n// //             </div>\n// //             <div className=\"price-section\">\n// //               <span className=\"price-label\">Satış Fiyatı</span>\n// //               <span className=\"price-value\">{parseFloat(vehicle.sale_price).toLocaleString('tr-TR', { style: 'currency', currency: 'TRY' })}</span>\n// //             </div>\n// //             {vehicle.description && (\n// //               <div className=\"description-section\">\n// //                 <h4>Açıklama</h4><p>{vehicle.description}</p>\n// //               </div>\n// //             )}\n// //             <button className=\"message-action-button\" onClick={openChat}>\n// //               Satıcı ile Canlı Mesajlaşma\n// //             </button>\n// //           </div>\n// //         </div>\n// //       </div>\n// //     </div>\n// //   );\n// // }\n\n// // export default HomePage;\n// // BU KODUN TAMAMINI KOPYALAYIP MEVCUT HomePage.js DOSYANIZLA DEĞİŞTİRİN\n// // BU KODUN TAMAMINI KOPYALAYIP MEVCUT HomePage.js DOSYANIZLA DEĞİŞTİRİN\n\n// import React, { useState, useEffect, useCallback } from 'react';\n// import axios from 'axios';\n// import { useNavigate } from 'react-router-dom';\n// import { jwtDecode } from 'jwt-decode';\n// import './HomePage.css'; \n// import ChatModal from './ChatModal';\n// import { socket } from './socket';\n// import { FaCalculator, FaChartLine, FaEnvelope, FaSignOutAlt } from 'react-icons/fa';\n\n// function HomePage() {\n//   const [vehicles, setVehicles] = useState([]);\n//   const [isLoading, setIsLoading] = useState(true);\n//   const navigate = useNavigate();\n\n//   const [selectedVehicleForDetails, setSelectedVehicleForDetails] = useState(null);\n//   const [selectedVehicleForChat, setSelectedVehicleForChat] = useState(null);\n//   const [userFullName, setUserFullName] = useState('');\n\n//   const handleLogout = useCallback(() => {\n//     socket.disconnect(); \n//     localStorage.removeItem('token');\n//     navigate('/');\n//   }, [navigate]);\n\n//   useEffect(() => {\n//     const token = localStorage.getItem('token');\n//     if (token) {\n//         try {\n//             const decodedToken = jwtDecode(token);\n//             setUserFullName(decodedToken.name); \n//         } catch (error) {\n//             console.error(\"Geçersiz token, çıkış yapılıyor.\", error);\n//             handleLogout();\n//         }\n//     } else {\n//         navigate('/');\n//     }\n\n//     const fetchAllVehicles = async () => {\n//       try {\n//         const response = await axios.get('http://localhost:5000/api/vehicles');\n//         setVehicles(response.data);\n//       } catch (error) {\n//         console.error(\"Araçlar çekilirken hata oluştu:\", error);\n//       } finally {\n//         setIsLoading(false);\n//       }\n//     };\n//     fetchAllVehicles();\n\n//   }, [navigate, handleLogout]); \n\n//   const openDetailsModal = async (vehicleId) => {\n//     try {\n//       const response = await axios.get(`http://localhost:5000/api/vehicles/${vehicleId}`);\n//       setSelectedVehicleForDetails(response.data);\n//     } catch (error) {\n//       alert(\"Araç detayları yüklenirken bir hata oluştu.\");\n//     }\n//   };\n//   const closeDetailsModal = () => setSelectedVehicleForDetails(null);\n\n//   const openChatModal = (vehicle) => {\n//     if (vehicle) {\n//         closeDetailsModal(); \n//         setSelectedVehicleForChat(vehicle); \n//     }\n//   };\n//   const closeChatModal = () => setSelectedVehicleForChat(null);\n\n//   if (isLoading) return <div className=\"loading-container\">İlanlar Yükleniyor...</div>;\n\n//   return (\n//     <div className=\"home-page-container\">\n//       <header className=\"home-header\">\n//         <div className=\"welcome-message\">\n//           Merhaba <span>{userFullName}</span>, Bayramlar Auto İlanlarına Hoş Geldiniz.\n//         </div>\n//         <nav className=\"header-actions\">\n\n//           {/* *** GÜNCELLEME: onClick olayı doğru kullanıcı rotasına yönlendirildi *** */}\n//           <button className=\"action-button\" onClick={() => navigate('/kredi-hesapla')}>\n//             <FaCalculator />\n//             <span>Kredi Hesapla</span>\n//           </button>\n\n//           {/* *** GÜNCELLEME: onClick olayı doğru kullanıcı rotasına yönlendirildi *** */}\n//           <button className=\"action-button\" onClick={() => navigate('/piyasa-degeri')}>\n//             <FaChartLine />\n//             <span>Piyasa Değeri</span>\n//           </button>\n\n//           <button className=\"action-button\" onClick={() => navigate('/user/message')}>\n//             <FaEnvelope />\n//             <span>Mesajlarım</span>\n//           </button>\n//           <button className=\"action-button logout\" onClick={handleLogout}>\n//             <FaSignOutAlt />\n//             <span>Çıkış Yap</span>\n//           </button>\n//         </nav>\n//       </header>\n\n//       <main className=\"vehicle-gallery\">\n//         {vehicles.map(vehicle => (\n//           <div key={vehicle.id} className=\"vehicle-card-item\" onClick={() => openDetailsModal(vehicle.id)}>\n//             <div className=\"card-image-container\">\n//               <img \n//                 src={vehicle.photo_url ? `http://localhost:5000/${vehicle.photo_url}` : 'https://via.placeholder.com/400x300?text=Resim+Yok'} \n//                 alt={`${vehicle.brand} ${vehicle.model}`}\n//               />\n//             </div>\n//             <div className=\"card-content\">\n//               <div>\n//                 <h3 className=\"vehicle-title\">{vehicle.brand} {vehicle.model}</h3>\n//                 <p className=\"vehicle-specs\">{vehicle.year} • {vehicle.mileage?.toLocaleString('tr-TR')} km • {vehicle.fuel}</p>\n//               </div>\n//               <div className=\"price-tag\">\n//                 {parseFloat(vehicle.sale_price).toLocaleString('tr-TR', { style: 'currency', currency: 'TRY', minimumFractionDigits: 0, maximumFractionDigits: 0 })}\n//               </div>\n//             </div>\n//           </div>\n//         ))}\n//       </main>\n\n//       {selectedVehicleForDetails && (\n//         <VehicleDetailModal \n//           vehicle={selectedVehicleForDetails} \n//           closeModal={closeDetailsModal} \n//           openChat={() => openChatModal(selectedVehicleForDetails)}\n//         />\n//       )}\n\n//       {selectedVehicleForChat && (\n//         <ChatModal \n//           key={selectedVehicleForChat.id}\n//           vehicle={selectedVehicleForChat} \n//           closeModal={closeChatModal} \n//         />\n//       )}\n//     </div>\n//   );\n// }\n\n// // VehicleDetailModal bileşeni olduğu gibi korunuyor\n// function VehicleDetailModal({ vehicle, closeModal, openChat }) {\n//   const [currentImageIndex, setCurrentImageIndex] = useState(0);\n\n//   const nextImage = (e) => {\n//     e.stopPropagation();\n//     setCurrentImageIndex(prev => (prev === vehicle.photos.length - 1 ? 0 : prev + 1));\n//   };\n//   const prevImage = (e) => {\n//     e.stopPropagation();\n//     setCurrentImageIndex(prev => (prev === 0 ? vehicle.photos.length - 1 : prev - 1));\n//   };\n\n//   return (\n//     <div className=\"modal-overlay\" onClick={closeModal}>\n//       <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n//         <button className=\"modal-close-btn\" onClick={closeModal}>×</button>\n//         <div className=\"modal-body\">\n//           <div className=\"modal-images-section\">\n//             {vehicle.photos && vehicle.photos.length > 0 ? (\n//               <div className=\"image-gallery\">\n//                 <div className=\"main-image-container\">\n//                   <img src={`http://localhost:5000/${vehicle.photos[currentImageIndex].photo_url}`} alt=\"Ana Araç\" className=\"main-image\" />\n//                   {vehicle.photos.length > 1 && (\n//                     <>\n//                       {/* *** GÜNCELLEME: Yazım hatası (classsName -> className) düzeltildi *** */}\n//                       <button className=\"image-nav-btn prev\" onClick={prevImage}>‹</button>\n//                       <button className=\"image-nav-btn next\" onClick={nextImage}>›</button>\n//                     </>\n//                   )}\n//                 </div>\n//                 {vehicle.photos.length > 1 && (\n//                   <div className=\"thumbnail-container\">\n//                     {vehicle.photos.map((photo, index) => (\n//                       <img key={photo.id} src={`http://localhost:5000/${photo.photo_url}`} alt={`Thumbnail ${index + 1}`}\n//                            className={`thumbnail ${index === currentImageIndex ? 'active' : ''}`}\n//                            onClick={(e) => { e.stopPropagation(); setCurrentImageIndex(index); }} />\n//                     ))}\n//                   </div>\n//                 )}\n//               </div>\n//             ) : <p>Bu araç için fotoğraf bulunmamaktadır.</p>}\n//           </div>\n//           <div className=\"modal-info-section\">\n//             <h2 className=\"vehicle-modal-title\">{vehicle.brand} {vehicle.model}</h2>\n//             <div className=\"vehicle-details-grid\">\n//               <div className=\"detail-item\"><span className=\"detail-label\">Yıl:</span><span className=\"detail-value\">{vehicle.year}</span></div>\n//               <div className=\"detail-item\"><span className=\"detail-label\">Kilometre:</span><span className=\"detail-value\">{vehicle.mileage?.toLocaleString('tr-TR')} km</span></div>\n//               <div className=\"detail-item\"><span className=\"detail-label\">Yakıt:</span><span className=\"detail-value\">{vehicle.fuel}</span></div>\n//               <div className=\"detail-item\"><span className=\"detail-label\">Vites:</span><span className=\"detail-value\">{vehicle.gear}</span></div>\n//             </div>\n//             <div className=\"price-section\">\n//               <span className=\"price-label\">Satış Fiyatı</span>\n//               <span className=\"price-value\">{parseFloat(vehicle.sale_price).toLocaleString('tr-TR', { style: 'currency', currency: 'TRY' })}</span>\n//             </div>\n//             {vehicle.description && (\n//               <div className=\"description-section\">\n//                 <h4>Açıklama</h4><p>{vehicle.description}</p>\n//               </div>\n//             )}\n//             <button className=\"message-action-button\" onClick={openChat}>\n//               Satıcı ile Canlı Mesajlaşma\n//             </button>\n//           </div>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\n\n// export default HomePage;\n// KULLANICININ OKUNMAMIŞ MESAJ SAYISINI GETİREN API YOLU\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jwtDecode } from 'jwt-decode';\nimport './HomePage.css';\nimport ChatModal from './ChatModal';\nimport { socket } from './socket';\nimport { FaCalculator, FaChartLine, FaEnvelope, FaSignOutAlt } from 'react-icons/fa';\nimport UserConversationsModal from './UserConversationsModal';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction HomePage() {\n  _s();\n  const [vehicles, setVehicles] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const navigate = useNavigate();\n  const [selectedVehicleForDetails, setSelectedVehicleForDetails] = useState(null);\n  const [selectedVehicleForChat, setSelectedVehicleForChat] = useState(null);\n  const [userFullName, setUserFullName] = useState('');\n  const [isConversationsModalOpen, setIsConversationsModalOpen] = useState(false);\n\n  // ===> EKLEME 1: Okunmamış mesaj sayısını tutacak state eklendi.\n  const [unreadCount, setUnreadCount] = useState(0);\n  const handleLogout = useCallback(() => {\n    socket.disconnect();\n    localStorage.removeItem('token');\n    navigate('/');\n  }, [navigate]);\n\n  // ===> EKLEME 2: Bildirim sayısını çeken ve socket.io'yu dinleyen yeni bir useEffect eklendi.\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) return;\n\n    // Sayfa yüklendiğinde ve yeni mesaj geldiğinde okunmamış sayısını çeken fonksiyon\n    const fetchUnreadCount = async () => {\n      try {\n        const response = await axios.get('http://localhost:5000/api/user-notifications/unread-count', {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n        setUnreadCount(response.data.unreadCount);\n      } catch (error) {\n        console.error(\"Bildirim sayısı alınamadı:\", error);\n      }\n    };\n    fetchUnreadCount(); // Sayfa ilk yüklendiğinde sayıyı bir kez çek\n\n    if (!socket.connected) {\n      socket.connect();\n    }\n\n    // Backend'den 'update_notification_count' sinyali geldiğinde sayıyı yeniden çek\n    socket.on('update_notification_count', fetchUnreadCount);\n\n    // Component DOM'dan kaldırıldığında socket dinleyicisini temizle\n    return () => {\n      socket.off('update_notification_count', fetchUnreadCount);\n    };\n  }, []);\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      try {\n        const decodedToken = jwtDecode(token);\n        setUserFullName(decodedToken.name);\n      } catch (error) {\n        console.error(\"Geçersiz token, çıkış yapılıyor.\", error);\n        handleLogout();\n      }\n    } else {\n      navigate('/');\n    }\n    const fetchAllVehicles = async () => {\n      try {\n        const response = await axios.get('http://localhost:5000/api/vehicles');\n        setVehicles(response.data);\n      } catch (error) {\n        console.error(\"Araçlar çekilirken hata oluştu:\", error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchAllVehicles();\n  }, [navigate, handleLogout]);\n\n  // ===> EKLEME 3: \"Mesajlarım\" butonuna tıklandığında sayacı sıfırlayacak yeni bir fonksiyon eklendi.\n  const handleOpenConversations = () => {\n    setIsConversationsModalOpen(true);\n    // Gelen kutusu açıldığında, arayüzdeki sayacı anında sıfırla.\n    // Gerçek veritabanı güncellemesi, kullanıcı sohbeti açınca gerçekleşebilir.\n    setUnreadCount(0);\n  };\n  const openDetailsModal = async vehicleId => {\n    try {\n      const response = await axios.get(`http://localhost:5000/api/vehicles/${vehicleId}`);\n      setSelectedVehicleForDetails(response.data);\n    } catch (error) {\n      alert(\"Araç detayları yüklenirken bir hata oluştu.\");\n    }\n  };\n  const closeDetailsModal = () => setSelectedVehicleForDetails(null);\n  const openChatModal = vehicle => {\n    if (vehicle) {\n      closeDetailsModal();\n      setSelectedVehicleForChat(vehicle);\n    }\n  };\n  const closeChatModal = () => setSelectedVehicleForChat(null);\n  const openChatFromConversations = async vehicleId => {\n    setIsConversationsModalOpen(false);\n    try {\n      const response = await axios.get(`http://localhost:5000/api/vehicles/${vehicleId}`);\n      setSelectedVehicleForChat(response.data);\n    } catch (error) {\n      alert(\"Sohbet açılırken bir hata oluştu. Lütfen tekrar deneyin.\");\n    }\n  };\n  if (isLoading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading-container\",\n    children: \"\\u0130lanlar Y\\xFCkleniyor...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 549,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home-page-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"home-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"welcome-message\",\n        children: [\"Merhaba \", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: userFullName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 555,\n          columnNumber: 19\n        }, this), \", Bayramlar Auto \\u0130lanlar\\u0131na Ho\\u015F Geldiniz.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 554,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"header-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"action-button\",\n          onClick: () => navigate('/kredi-hesapla'),\n          children: [/*#__PURE__*/_jsxDEV(FaCalculator, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 559,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Kredi Hesapla\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 560,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"action-button\",\n          onClick: () => navigate('/piyasa-degeri'),\n          children: [/*#__PURE__*/_jsxDEV(FaChartLine, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 564,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Piyasa De\\u011Feri\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 563,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"action-button\",\n          onClick: handleOpenConversations,\n          children: [/*#__PURE__*/_jsxDEV(FaEnvelope, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Mesajlar\\u0131m\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 571,\n            columnNumber: 13\n          }, this), unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"notification-badge\",\n            children: unreadCount\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 573,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"action-button logout\",\n          onClick: handleLogout,\n          children: [/*#__PURE__*/_jsxDEV(FaSignOutAlt, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\xC7\\u0131k\\u0131\\u015F Yap\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 579,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 557,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 553,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"vehicle-gallery\",\n      children: vehicles.map(vehicle => {\n        var _vehicle$mileage;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"vehicle-card-item\",\n          onClick: () => openDetailsModal(vehicle.id),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-image-container\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: vehicle.photo_url ? `http://localhost:5000/${vehicle.photo_url}` : 'https://via.placeholder.com/400x300?text=Resim+Yok',\n              alt: `${vehicle.brand} ${vehicle.model}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 588,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 587,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"vehicle-title\",\n                children: [vehicle.brand, \" \", vehicle.model]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 595,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"vehicle-specs\",\n                children: [vehicle.year, \" \\u2022 \", (_vehicle$mileage = vehicle.mileage) === null || _vehicle$mileage === void 0 ? void 0 : _vehicle$mileage.toLocaleString('tr-TR'), \" km \\u2022 \", vehicle.fuel]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 596,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 594,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"price-tag\",\n              children: parseFloat(vehicle.sale_price).toLocaleString('tr-TR', {\n                style: 'currency',\n                currency: 'TRY',\n                minimumFractionDigits: 0,\n                maximumFractionDigits: 0\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 598,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 13\n          }, this)]\n        }, vehicle.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 586,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 584,\n      columnNumber: 7\n    }, this), selectedVehicleForDetails && /*#__PURE__*/_jsxDEV(VehicleDetailModal, {\n      vehicle: selectedVehicleForDetails,\n      closeModal: closeDetailsModal,\n      openChat: () => openChatModal(selectedVehicleForDetails)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 607,\n      columnNumber: 9\n    }, this), selectedVehicleForChat && /*#__PURE__*/_jsxDEV(ChatModal, {\n      vehicle: selectedVehicleForChat,\n      closeModal: closeChatModal\n    }, selectedVehicleForChat.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 615,\n      columnNumber: 9\n    }, this), isConversationsModalOpen && /*#__PURE__*/_jsxDEV(UserConversationsModal, {\n      closeModal: () => setIsConversationsModalOpen(false),\n      openChatForVehicle: openChatFromConversations\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 623,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 552,\n    columnNumber: 5\n  }, this);\n}\n\n// VehicleDetailModal bileşeni olduğu gibi kalabilir...\n_s(HomePage, \"ZaqKGWuRwXNoL0r0lpiZyDRXZoE=\", false, function () {\n  return [useNavigate];\n});\n_c = HomePage;\nfunction VehicleDetailModal({\n  vehicle,\n  closeModal,\n  openChat\n}) {\n  _s2();\n  var _vehicle$mileage2;\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  const nextImage = e => {\n    e.stopPropagation();\n    setCurrentImageIndex(prev => prev === vehicle.photos.length - 1 ? 0 : prev + 1);\n  };\n  const prevImage = e => {\n    e.stopPropagation();\n    setCurrentImageIndex(prev => prev === 0 ? vehicle.photos.length - 1 : prev - 1);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-overlay\",\n    onClick: closeModal,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-content\",\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"modal-close-btn\",\n        onClick: closeModal,\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 648,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-images-section\",\n          children: vehicle.photos && vehicle.photos.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"image-gallery\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"main-image-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: `http://localhost:5000/${vehicle.photos[currentImageIndex].photo_url}`,\n                alt: \"Ana Ara\\xE7\",\n                className: \"main-image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 654,\n                columnNumber: 19\n              }, this), vehicle.photos.length > 1 && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"image-nav-btn prev\",\n                  onClick: prevImage,\n                  children: \"\\u2039\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 657,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"image-nav-btn next\",\n                  onClick: nextImage,\n                  children: \"\\u203A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 658,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 653,\n              columnNumber: 17\n            }, this), vehicle.photos.length > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"thumbnail-container\",\n              children: vehicle.photos.map((photo, index) => /*#__PURE__*/_jsxDEV(\"img\", {\n                src: `http://localhost:5000/${photo.photo_url}`,\n                alt: `Thumbnail ${index + 1}`,\n                className: `thumbnail ${index === currentImageIndex ? 'active' : ''}`,\n                onClick: e => {\n                  e.stopPropagation();\n                  setCurrentImageIndex(index);\n                }\n              }, photo.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 665,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 663,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 652,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Bu ara\\xE7 i\\xE7in foto\\u011Fraf bulunmamaktad\\u0131r.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 672,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 650,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-info-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"vehicle-modal-title\",\n            children: [vehicle.brand, \" \", vehicle.model]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 675,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"vehicle-details-grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"detail-label\",\n                children: \"Y\\u0131l:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 677,\n                columnNumber: 44\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"detail-value\",\n                children: vehicle.year\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 677,\n                columnNumber: 86\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 677,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"detail-label\",\n                children: \"Kilometre:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 678,\n                columnNumber: 44\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"detail-value\",\n                children: [(_vehicle$mileage2 = vehicle.mileage) === null || _vehicle$mileage2 === void 0 ? void 0 : _vehicle$mileage2.toLocaleString('tr-TR'), \" km\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 678,\n                columnNumber: 92\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 678,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"detail-label\",\n                children: \"Yak\\u0131t:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 679,\n                columnNumber: 44\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"detail-value\",\n                children: vehicle.fuel\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 679,\n                columnNumber: 88\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 679,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"detail-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"detail-label\",\n                children: \"Vites:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 680,\n                columnNumber: 44\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"detail-value\",\n                children: vehicle.gear\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 680,\n                columnNumber: 88\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 680,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 676,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"price-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"price-label\",\n              children: \"Sat\\u0131\\u015F Fiyat\\u0131\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 683,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"price-value\",\n              children: parseFloat(vehicle.sale_price).toLocaleString('tr-TR', {\n                style: 'currency',\n                currency: 'TRY'\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 684,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 682,\n            columnNumber: 13\n          }, this), vehicle.description && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"description-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"A\\xE7\\u0131klama\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 688,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: vehicle.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 688,\n              columnNumber: 34\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 687,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"message-action-button\",\n            onClick: openChat,\n            children: \"Sat\\u0131c\\u0131 ile Canl\\u0131 Mesajla\\u015Fma\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 691,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 674,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 649,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 647,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 646,\n    columnNumber: 5\n  }, this);\n}\n_s2(VehicleDetailModal, \"9v0ytpuutRzzYv7ZHc4AVX3IX2Q=\");\n_c2 = VehicleDetailModal;\nexport default HomePage;\nvar _c, _c2;\n$RefreshReg$(_c, \"HomePage\");\n$RefreshReg$(_c2, \"VehicleDetailModal\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","axios","useNavigate","jwtDecode","ChatModal","socket","FaCalculator","FaChartLine","FaEnvelope","FaSignOutAlt","UserConversationsModal","jsxDEV","_jsxDEV","Fragment","_Fragment","HomePage","_s","vehicles","setVehicles","isLoading","setIsLoading","navigate","selectedVehicleForDetails","setSelectedVehicleForDetails","selectedVehicleForChat","setSelectedVehicleForChat","userFullName","setUserFullName","isConversationsModalOpen","setIsConversationsModalOpen","unreadCount","setUnreadCount","handleLogout","disconnect","localStorage","removeItem","token","getItem","fetchUnreadCount","response","get","headers","data","error","console","connected","connect","on","off","decodedToken","name","fetchAllVehicles","handleOpenConversations","openDetailsModal","vehicleId","alert","closeDetailsModal","openChatModal","vehicle","closeChatModal","openChatFromConversations","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","map","_vehicle$mileage","id","src","photo_url","alt","brand","model","year","mileage","toLocaleString","fuel","parseFloat","sale_price","style","currency","minimumFractionDigits","maximumFractionDigits","VehicleDetailModal","closeModal","openChat","openChatForVehicle","_c","_s2","_vehicle$mileage2","currentImageIndex","setCurrentImageIndex","nextImage","e","stopPropagation","prev","photos","length","prevImage","photo","index","gear","description","_c2","$RefreshReg$"],"sources":["C:/Users/Muhammet/Desktop/galerio-app/client/src/HomePage.js"],"sourcesContent":["// // import React, { useState, useEffect, useCallback } from 'react'; // <-- 1. useCallback'i import edin\r\n// // import axios from 'axios';\r\n// // import { useNavigate } from 'react-router-dom';\r\n// // import { jwtDecode } from 'jwt-decode';\r\n// // import './HomePage.css'; \r\n// // import ChatModal from './ChatModal';\r\n// // import { socket } from './socket';\r\n\r\n// // function HomePage() {\r\n// //   const [vehicles, setVehicles] = useState([]);\r\n// //   const [isLoading, setIsLoading] = useState(true);\r\n// //   const navigate = useNavigate();\r\n  \r\n// //   const [selectedVehicleForDetails, setSelectedVehicleForDetails] = useState(null);\r\n// //   const [selectedVehicleForChat, setSelectedVehicleForChat] = useState(null);\r\n\r\n// //   const [userFullName, setUserFullName] = useState('');\r\n\r\n// //   // --- 2. DEĞİŞİKLİK: handleLogout fonksiyonunu useCallback ile sarmalayın ---\r\n// //   // Bu, fonksiyonun gereksiz yere yeniden oluşturulmasını engeller ve sabit bir referans sağlar.\r\n// //   const handleLogout = useCallback(() => {\r\n// //     socket.disconnect(); \r\n// //     localStorage.removeItem('token');\r\n// //     navigate('/');\r\n// //   }, [navigate]); // navigate, bu fonksiyonun tek bağımlılığıdır.\r\n\r\n// //   useEffect(() => {\r\n// //     const token = localStorage.getItem('token');\r\n// //     if (token) {\r\n// //         try {\r\n// //             const decodedToken = jwtDecode(token);\r\n// //             setUserFullName(decodedToken.name); \r\n// //         } catch (error) {\r\n// //             console.error(\"Geçersiz token, çıkış yapılıyor.\", error);\r\n// //             handleLogout(); // Artık sabit olan fonksiyonu burada güvenle kullanabiliriz.\r\n// //         }\r\n// //     } else {\r\n// //         navigate('/');\r\n// //     }\r\n\r\n// //     const fetchAllVehicles = async () => {\r\n// //       try {\r\n// //         const response = await axios.get('http://localhost:5000/api/vehicles');\r\n// //         setVehicles(response.data);\r\n// //       } catch (error) {\r\n// //         console.error(\"Araçlar çekilirken hata oluştu:\", error);\r\n// //       } finally {\r\n// //         setIsLoading(false);\r\n// //       }\r\n// //     };\r\n// //     fetchAllVehicles();\r\n    \r\n// //   // --- 3. DEĞİŞİKLİK: handleLogout'u bağımlılık dizisine ekleyin ---\r\n// //   // Artık sabit bir fonksiyon olduğu için, bunu yapmak güvenlidir ve uyarıyı ortadan kaldırır.\r\n// //   }, [navigate, handleLogout]); \r\n\r\n// //   const openDetailsModal = async (vehicleId) => {\r\n// //     try {\r\n// //       const response = await axios.get(`http://localhost:5000/api/vehicles/${vehicleId}`);\r\n// //       setSelectedVehicleForDetails(response.data);\r\n// //     } catch (error) {\r\n// //       alert(\"Araç detayları yüklenirken bir hata oluştu.\");\r\n// //     }\r\n// //   };\r\n// //   const closeDetailsModal = () => setSelectedVehicleForDetails(null);\r\n\r\n// //   const openChatModal = (vehicle) => {\r\n// //     if (vehicle) {\r\n// //         closeDetailsModal(); \r\n// //         setSelectedVehicleForChat(vehicle); \r\n// //     }\r\n// //   };\r\n// //   const closeChatModal = () => setSelectedVehicleForChat(null);\r\n\r\n// //   if (isLoading) return <div className=\"loading-container\">İlanlar Yükleniyor...</div>;\r\n\r\n// //   return (\r\n// //     <div className=\"home-page-container\">\r\n// //       <header className=\"home-header\">\r\n// //         <h1 className=\"brand-title\">\r\n// //           {userFullName \r\n// //             ? `Merhaba ${userFullName}, Bayramlar Auto Araç İlanlarına Hoş Geldiniz.`\r\n// //             : 'Bayramlar Auto Araç İlanlarına Hoş Geldiniz.'\r\n// //           }\r\n// //         </h1>\r\n// //         <button onClick={handleLogout} className=\"logout-button\">Çıkış Yap</button>\r\n// //       </header>\r\n      \r\n// //       {/* ... (kodun geri kalanı aynı) ... */}\r\n// //       <main className=\"vehicle-gallery\">\r\n// //         {vehicles.map(vehicle => (\r\n// //           <div key={vehicle.id} className=\"vehicle-card-item\" onClick={() => openDetailsModal(vehicle.id)}>\r\n// //             <div className=\"card-image-container\">\r\n// //               <img \r\n// //                 src={vehicle.photo_url ? `http://localhost:5000/${vehicle.photo_url}` : 'https://via.placeholder.com/400x300?text=Resim+Yok'} \r\n// //                 alt={`${vehicle.brand} ${vehicle.model}`}\r\n// //               />\r\n// //             </div>\r\n// //             <div className=\"card-content\">\r\n// //               <h3 className=\"vehicle-title\">{vehicle.brand} {vehicle.model}</h3>\r\n// //               <p className=\"vehicle-specs\">{vehicle.year} • {vehicle.mileage?.toLocaleString('tr-TR')} km • {vehicle.fuel}</p>\r\n// //               <div className=\"vehicle-price\">{parseFloat(vehicle.sale_price).toLocaleString('tr-TR', { style: 'currency', currency: 'TRY' })}</div>\r\n// //             </div>\r\n// //           </div>\r\n// //         ))}\r\n// //       </main>\r\n\r\n// //       {selectedVehicleForDetails && (\r\n// //         <VehicleDetailModal \r\n// //           vehicle={selectedVehicleForDetails} \r\n// //           closeModal={closeDetailsModal} \r\n// //           openChat={() => openChatModal(selectedVehicleForDetails)}\r\n// //         />\r\n// //       )}\r\n\r\n// //       {/* {selectedVehicleForChat && (\r\n// //         <ChatModal \r\n// //           vehicle={selectedVehicleForChat} \r\n// //           closeModal={closeChatModal} \r\n// //         />\r\n// //       )} */}\r\n// //       {selectedVehicleForChat && (\r\n// //         <ChatModal \r\n// //           key={selectedVehicleForChat.id} // <-- EN ÖNEMLİ DÜZELTME BU SATIRDIR!\r\n// //           vehicle={selectedVehicleForChat} \r\n// //           closeModal={closeChatModal} \r\n// //         />\r\n// //       )}\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // // ... VehicleDetailModal bileşeni aynı kalabilir ...\r\n// // function VehicleDetailModal({ vehicle, closeModal, openChat }) {\r\n// //   const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n\r\n// //   const nextImage = (e) => {\r\n// //     e.stopPropagation();\r\n// //     setCurrentImageIndex(prev => (prev === vehicle.photos.length - 1 ? 0 : prev + 1));\r\n// //   };\r\n// //   const prevImage = (e) => {\r\n// //     e.stopPropagation();\r\n// //     setCurrentImageIndex(prev => (prev === 0 ? vehicle.photos.length - 1 : prev - 1));\r\n// //   };\r\n\r\n// //   return (\r\n// //     <div className=\"modal-overlay\" onClick={closeModal}>\r\n// //       <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n// //         <button className=\"modal-close-btn\" onClick={closeModal}>×</button>\r\n// //         <div className=\"modal-body\">\r\n// //           <div className=\"modal-images-section\">\r\n// //             {vehicle.photos && vehicle.photos.length > 0 ? (\r\n// //               <div className=\"image-gallery\">\r\n// //                 <div className=\"main-image-container\">\r\n// //                   <img src={`http://localhost:5000/${vehicle.photos[currentImageIndex].photo_url}`} alt=\"Ana Araç\" className=\"main-image\" />\r\n// //                   {vehicle.photos.length > 1 && (\r\n// //                     <>\r\n// //                       <button className=\"image-nav-btn prev\" onClick={prevImage}>‹</button>\r\n// //                       <button className=\"image-nav-btn next\" onClick={nextImage}>›</button>\r\n// //                     </>\r\n// //                   )}\r\n// //                 </div>\r\n// //                 {vehicle.photos.length > 1 && (\r\n// //                   <div className=\"thumbnail-container\">\r\n// //                     {vehicle.photos.map((photo, index) => (\r\n// //                       <img key={photo.id} src={`http://localhost:5000/${photo.photo_url}`} alt={`Thumbnail ${index + 1}`}\r\n// //                            className={`thumbnail ${index === currentImageIndex ? 'active' : ''}`}\r\n// //                            onClick={(e) => { e.stopPropagation(); setCurrentImageIndex(index); }} />\r\n// //                     ))}\r\n// //                   </div>\r\n// //                 )}\r\n// //               </div>\r\n// //             ) : <p>Bu araç için fotoğraf bulunmamaktadır.</p>}\r\n// //           </div>\r\n// //           <div className=\"modal-info-section\">\r\n// //             <h2 className=\"vehicle-modal-title\">{vehicle.brand} {vehicle.model}</h2>\r\n// //             <div className=\"vehicle-details-grid\">\r\n// //               <div className=\"detail-item\"><span className=\"detail-label\">Yıl:</span><span className=\"detail-value\">{vehicle.year}</span></div>\r\n// //               <div className=\"detail-item\"><span className=\"detail-label\">Kilometre:</span><span className=\"detail-value\">{vehicle.mileage?.toLocaleString('tr-TR')} km</span></div>\r\n// //               <div className=\"detail-item\"><span className=\"detail-label\">Yakıt:</span><span className=\"detail-value\">{vehicle.fuel}</span></div>\r\n// //               <div className=\"detail-item\"><span className=\"detail-label\">Vites:</span><span className=\"detail-value\">{vehicle.gear}</span></div>\r\n// //             </div>\r\n// //             <div className=\"price-section\">\r\n// //               <span className=\"price-label\">Satış Fiyatı</span>\r\n// //               <span className=\"price-value\">{parseFloat(vehicle.sale_price).toLocaleString('tr-TR', { style: 'currency', currency: 'TRY' })}</span>\r\n// //             </div>\r\n// //             {vehicle.description && (\r\n// //               <div className=\"description-section\">\r\n// //                 <h4>Açıklama</h4><p>{vehicle.description}</p>\r\n// //               </div>\r\n// //             )}\r\n// //             <button className=\"message-action-button\" onClick={openChat}>\r\n// //               Satıcı ile Canlı Mesajlaşma\r\n// //             </button>\r\n// //           </div>\r\n// //         </div>\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // export default HomePage;\r\n// // BU KODUN TAMAMINI KOPYALAYIP MEVCUT HomePage.js DOSYANIZLA DEĞİŞTİRİN\r\n// // BU KODUN TAMAMINI KOPYALAYIP MEVCUT HomePage.js DOSYANIZLA DEĞİŞTİRİN\r\n\r\n// import React, { useState, useEffect, useCallback } from 'react';\r\n// import axios from 'axios';\r\n// import { useNavigate } from 'react-router-dom';\r\n// import { jwtDecode } from 'jwt-decode';\r\n// import './HomePage.css'; \r\n// import ChatModal from './ChatModal';\r\n// import { socket } from './socket';\r\n// import { FaCalculator, FaChartLine, FaEnvelope, FaSignOutAlt } from 'react-icons/fa';\r\n\r\n// function HomePage() {\r\n//   const [vehicles, setVehicles] = useState([]);\r\n//   const [isLoading, setIsLoading] = useState(true);\r\n//   const navigate = useNavigate();\r\n  \r\n//   const [selectedVehicleForDetails, setSelectedVehicleForDetails] = useState(null);\r\n//   const [selectedVehicleForChat, setSelectedVehicleForChat] = useState(null);\r\n//   const [userFullName, setUserFullName] = useState('');\r\n\r\n//   const handleLogout = useCallback(() => {\r\n//     socket.disconnect(); \r\n//     localStorage.removeItem('token');\r\n//     navigate('/');\r\n//   }, [navigate]);\r\n\r\n//   useEffect(() => {\r\n//     const token = localStorage.getItem('token');\r\n//     if (token) {\r\n//         try {\r\n//             const decodedToken = jwtDecode(token);\r\n//             setUserFullName(decodedToken.name); \r\n//         } catch (error) {\r\n//             console.error(\"Geçersiz token, çıkış yapılıyor.\", error);\r\n//             handleLogout();\r\n//         }\r\n//     } else {\r\n//         navigate('/');\r\n//     }\r\n\r\n//     const fetchAllVehicles = async () => {\r\n//       try {\r\n//         const response = await axios.get('http://localhost:5000/api/vehicles');\r\n//         setVehicles(response.data);\r\n//       } catch (error) {\r\n//         console.error(\"Araçlar çekilirken hata oluştu:\", error);\r\n//       } finally {\r\n//         setIsLoading(false);\r\n//       }\r\n//     };\r\n//     fetchAllVehicles();\r\n    \r\n//   }, [navigate, handleLogout]); \r\n\r\n//   const openDetailsModal = async (vehicleId) => {\r\n//     try {\r\n//       const response = await axios.get(`http://localhost:5000/api/vehicles/${vehicleId}`);\r\n//       setSelectedVehicleForDetails(response.data);\r\n//     } catch (error) {\r\n//       alert(\"Araç detayları yüklenirken bir hata oluştu.\");\r\n//     }\r\n//   };\r\n//   const closeDetailsModal = () => setSelectedVehicleForDetails(null);\r\n\r\n//   const openChatModal = (vehicle) => {\r\n//     if (vehicle) {\r\n//         closeDetailsModal(); \r\n//         setSelectedVehicleForChat(vehicle); \r\n//     }\r\n//   };\r\n//   const closeChatModal = () => setSelectedVehicleForChat(null);\r\n\r\n//   if (isLoading) return <div className=\"loading-container\">İlanlar Yükleniyor...</div>;\r\n\r\n//   return (\r\n//     <div className=\"home-page-container\">\r\n//       <header className=\"home-header\">\r\n//         <div className=\"welcome-message\">\r\n//           Merhaba <span>{userFullName}</span>, Bayramlar Auto İlanlarına Hoş Geldiniz.\r\n//         </div>\r\n//         <nav className=\"header-actions\">\r\n\r\n//           {/* *** GÜNCELLEME: onClick olayı doğru kullanıcı rotasına yönlendirildi *** */}\r\n//           <button className=\"action-button\" onClick={() => navigate('/kredi-hesapla')}>\r\n//             <FaCalculator />\r\n//             <span>Kredi Hesapla</span>\r\n//           </button>\r\n          \r\n//           {/* *** GÜNCELLEME: onClick olayı doğru kullanıcı rotasına yönlendirildi *** */}\r\n//           <button className=\"action-button\" onClick={() => navigate('/piyasa-degeri')}>\r\n//             <FaChartLine />\r\n//             <span>Piyasa Değeri</span>\r\n//           </button>\r\n\r\n//           <button className=\"action-button\" onClick={() => navigate('/user/message')}>\r\n//             <FaEnvelope />\r\n//             <span>Mesajlarım</span>\r\n//           </button>\r\n//           <button className=\"action-button logout\" onClick={handleLogout}>\r\n//             <FaSignOutAlt />\r\n//             <span>Çıkış Yap</span>\r\n//           </button>\r\n//         </nav>\r\n//       </header>\r\n      \r\n//       <main className=\"vehicle-gallery\">\r\n//         {vehicles.map(vehicle => (\r\n//           <div key={vehicle.id} className=\"vehicle-card-item\" onClick={() => openDetailsModal(vehicle.id)}>\r\n//             <div className=\"card-image-container\">\r\n//               <img \r\n//                 src={vehicle.photo_url ? `http://localhost:5000/${vehicle.photo_url}` : 'https://via.placeholder.com/400x300?text=Resim+Yok'} \r\n//                 alt={`${vehicle.brand} ${vehicle.model}`}\r\n//               />\r\n//             </div>\r\n//             <div className=\"card-content\">\r\n//               <div>\r\n//                 <h3 className=\"vehicle-title\">{vehicle.brand} {vehicle.model}</h3>\r\n//                 <p className=\"vehicle-specs\">{vehicle.year} • {vehicle.mileage?.toLocaleString('tr-TR')} km • {vehicle.fuel}</p>\r\n//               </div>\r\n//               <div className=\"price-tag\">\r\n//                 {parseFloat(vehicle.sale_price).toLocaleString('tr-TR', { style: 'currency', currency: 'TRY', minimumFractionDigits: 0, maximumFractionDigits: 0 })}\r\n//               </div>\r\n//             </div>\r\n//           </div>\r\n//         ))}\r\n//       </main>\r\n\r\n//       {selectedVehicleForDetails && (\r\n//         <VehicleDetailModal \r\n//           vehicle={selectedVehicleForDetails} \r\n//           closeModal={closeDetailsModal} \r\n//           openChat={() => openChatModal(selectedVehicleForDetails)}\r\n//         />\r\n//       )}\r\n\r\n//       {selectedVehicleForChat && (\r\n//         <ChatModal \r\n//           key={selectedVehicleForChat.id}\r\n//           vehicle={selectedVehicleForChat} \r\n//           closeModal={closeChatModal} \r\n//         />\r\n//       )}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// // VehicleDetailModal bileşeni olduğu gibi korunuyor\r\n// function VehicleDetailModal({ vehicle, closeModal, openChat }) {\r\n//   const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n\r\n//   const nextImage = (e) => {\r\n//     e.stopPropagation();\r\n//     setCurrentImageIndex(prev => (prev === vehicle.photos.length - 1 ? 0 : prev + 1));\r\n//   };\r\n//   const prevImage = (e) => {\r\n//     e.stopPropagation();\r\n//     setCurrentImageIndex(prev => (prev === 0 ? vehicle.photos.length - 1 : prev - 1));\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"modal-overlay\" onClick={closeModal}>\r\n//       <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n//         <button className=\"modal-close-btn\" onClick={closeModal}>×</button>\r\n//         <div className=\"modal-body\">\r\n//           <div className=\"modal-images-section\">\r\n//             {vehicle.photos && vehicle.photos.length > 0 ? (\r\n//               <div className=\"image-gallery\">\r\n//                 <div className=\"main-image-container\">\r\n//                   <img src={`http://localhost:5000/${vehicle.photos[currentImageIndex].photo_url}`} alt=\"Ana Araç\" className=\"main-image\" />\r\n//                   {vehicle.photos.length > 1 && (\r\n//                     <>\r\n//                       {/* *** GÜNCELLEME: Yazım hatası (classsName -> className) düzeltildi *** */}\r\n//                       <button className=\"image-nav-btn prev\" onClick={prevImage}>‹</button>\r\n//                       <button className=\"image-nav-btn next\" onClick={nextImage}>›</button>\r\n//                     </>\r\n//                   )}\r\n//                 </div>\r\n//                 {vehicle.photos.length > 1 && (\r\n//                   <div className=\"thumbnail-container\">\r\n//                     {vehicle.photos.map((photo, index) => (\r\n//                       <img key={photo.id} src={`http://localhost:5000/${photo.photo_url}`} alt={`Thumbnail ${index + 1}`}\r\n//                            className={`thumbnail ${index === currentImageIndex ? 'active' : ''}`}\r\n//                            onClick={(e) => { e.stopPropagation(); setCurrentImageIndex(index); }} />\r\n//                     ))}\r\n//                   </div>\r\n//                 )}\r\n//               </div>\r\n//             ) : <p>Bu araç için fotoğraf bulunmamaktadır.</p>}\r\n//           </div>\r\n//           <div className=\"modal-info-section\">\r\n//             <h2 className=\"vehicle-modal-title\">{vehicle.brand} {vehicle.model}</h2>\r\n//             <div className=\"vehicle-details-grid\">\r\n//               <div className=\"detail-item\"><span className=\"detail-label\">Yıl:</span><span className=\"detail-value\">{vehicle.year}</span></div>\r\n//               <div className=\"detail-item\"><span className=\"detail-label\">Kilometre:</span><span className=\"detail-value\">{vehicle.mileage?.toLocaleString('tr-TR')} km</span></div>\r\n//               <div className=\"detail-item\"><span className=\"detail-label\">Yakıt:</span><span className=\"detail-value\">{vehicle.fuel}</span></div>\r\n//               <div className=\"detail-item\"><span className=\"detail-label\">Vites:</span><span className=\"detail-value\">{vehicle.gear}</span></div>\r\n//             </div>\r\n//             <div className=\"price-section\">\r\n//               <span className=\"price-label\">Satış Fiyatı</span>\r\n//               <span className=\"price-value\">{parseFloat(vehicle.sale_price).toLocaleString('tr-TR', { style: 'currency', currency: 'TRY' })}</span>\r\n//             </div>\r\n//             {vehicle.description && (\r\n//               <div className=\"description-section\">\r\n//                 <h4>Açıklama</h4><p>{vehicle.description}</p>\r\n//               </div>\r\n//             )}\r\n//             <button className=\"message-action-button\" onClick={openChat}>\r\n//               Satıcı ile Canlı Mesajlaşma\r\n//             </button>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default HomePage;\r\n// KULLANICININ OKUNMAMIŞ MESAJ SAYISINI GETİREN API YOLU\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { jwtDecode } from 'jwt-decode';\r\nimport './HomePage.css'; \r\nimport ChatModal from './ChatModal';\r\nimport { socket } from './socket';\r\nimport { FaCalculator, FaChartLine, FaEnvelope, FaSignOutAlt } from 'react-icons/fa';\r\nimport UserConversationsModal from './UserConversationsModal';\r\n\r\nfunction HomePage() {\r\n  const [vehicles, setVehicles] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const navigate = useNavigate();\r\n  \r\n  const [selectedVehicleForDetails, setSelectedVehicleForDetails] = useState(null);\r\n  const [selectedVehicleForChat, setSelectedVehicleForChat] = useState(null);\r\n  const [userFullName, setUserFullName] = useState('');\r\n  const [isConversationsModalOpen, setIsConversationsModalOpen] = useState(false);\r\n\r\n  // ===> EKLEME 1: Okunmamış mesaj sayısını tutacak state eklendi.\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n\r\n  const handleLogout = useCallback(() => {\r\n    socket.disconnect(); \r\n    localStorage.removeItem('token');\r\n    navigate('/');\r\n  }, [navigate]);\r\n  \r\n  // ===> EKLEME 2: Bildirim sayısını çeken ve socket.io'yu dinleyen yeni bir useEffect eklendi.\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) return;\r\n\r\n    // Sayfa yüklendiğinde ve yeni mesaj geldiğinde okunmamış sayısını çeken fonksiyon\r\n    const fetchUnreadCount = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:5000/api/user-notifications/unread-count', {\r\n          headers: { 'Authorization': `Bearer ${token}` }\r\n        });\r\n        setUnreadCount(response.data.unreadCount);\r\n      } catch (error) {\r\n        console.error(\"Bildirim sayısı alınamadı:\", error);\r\n      }\r\n    };\r\n    \r\n    fetchUnreadCount(); // Sayfa ilk yüklendiğinde sayıyı bir kez çek\r\n\r\n    if (!socket.connected) {\r\n        socket.connect();\r\n    }\r\n    \r\n    // Backend'den 'update_notification_count' sinyali geldiğinde sayıyı yeniden çek\r\n    socket.on('update_notification_count', fetchUnreadCount);\r\n\r\n    // Component DOM'dan kaldırıldığında socket dinleyicisini temizle\r\n    return () => {\r\n      socket.off('update_notification_count', fetchUnreadCount);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n        try {\r\n            const decodedToken = jwtDecode(token);\r\n            setUserFullName(decodedToken.name); \r\n        } catch (error) {\r\n            console.error(\"Geçersiz token, çıkış yapılıyor.\", error);\r\n            handleLogout();\r\n        }\r\n    } else {\r\n        navigate('/');\r\n    }\r\n\r\n    const fetchAllVehicles = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:5000/api/vehicles');\r\n        setVehicles(response.data);\r\n      } catch (error) {\r\n        console.error(\"Araçlar çekilirken hata oluştu:\", error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    fetchAllVehicles();\r\n    \r\n  }, [navigate, handleLogout]); \r\n\r\n  // ===> EKLEME 3: \"Mesajlarım\" butonuna tıklandığında sayacı sıfırlayacak yeni bir fonksiyon eklendi.\r\n  const handleOpenConversations = () => {\r\n    setIsConversationsModalOpen(true);\r\n    // Gelen kutusu açıldığında, arayüzdeki sayacı anında sıfırla.\r\n    // Gerçek veritabanı güncellemesi, kullanıcı sohbeti açınca gerçekleşebilir.\r\n    setUnreadCount(0); \r\n  };\r\n\r\n  const openDetailsModal = async (vehicleId) => {\r\n    try {\r\n      const response = await axios.get(`http://localhost:5000/api/vehicles/${vehicleId}`);\r\n      setSelectedVehicleForDetails(response.data);\r\n    } catch (error) {\r\n      alert(\"Araç detayları yüklenirken bir hata oluştu.\");\r\n    }\r\n  };\r\n  const closeDetailsModal = () => setSelectedVehicleForDetails(null);\r\n\r\n  const openChatModal = (vehicle) => {\r\n    if (vehicle) {\r\n        closeDetailsModal(); \r\n        setSelectedVehicleForChat(vehicle); \r\n    }\r\n  };\r\n  const closeChatModal = () => setSelectedVehicleForChat(null);\r\n\r\n  const openChatFromConversations = async (vehicleId) => {\r\n    setIsConversationsModalOpen(false);\r\n    try {\r\n      const response = await axios.get(`http://localhost:5000/api/vehicles/${vehicleId}`);\r\n      setSelectedVehicleForChat(response.data);\r\n    } catch (error) {\r\n      alert(\"Sohbet açılırken bir hata oluştu. Lütfen tekrar deneyin.\");\r\n    }\r\n  };\r\n\r\n\r\n  if (isLoading) return <div className=\"loading-container\">İlanlar Yükleniyor...</div>;\r\n\r\n  return (\r\n    <div className=\"home-page-container\">\r\n      <header className=\"home-header\">\r\n        <div className=\"welcome-message\">\r\n          Merhaba <span>{userFullName}</span>, Bayramlar Auto İlanlarına Hoş Geldiniz.\r\n        </div>\r\n        <nav className=\"header-actions\">\r\n          <button className=\"action-button\" onClick={() => navigate('/kredi-hesapla')}>\r\n            <FaCalculator />\r\n            <span>Kredi Hesapla</span>\r\n          </button>\r\n          \r\n          <button className=\"action-button\" onClick={() => navigate('/piyasa-degeri')}>\r\n            <FaChartLine />\r\n            <span>Piyasa Değeri</span>\r\n          </button>\r\n\r\n          {/* ===> EKLEME 4: Butonun onClick olayı güncellendi ve bildirim balonu eklendi. */}\r\n          <button className=\"action-button\" onClick={handleOpenConversations}>\r\n            <FaEnvelope />\r\n            <span>Mesajlarım</span>\r\n            {unreadCount > 0 && (\r\n                <span className=\"notification-badge\">{unreadCount}</span>\r\n            )}\r\n          </button>\r\n\r\n          <button className=\"action-button logout\" onClick={handleLogout}>\r\n            <FaSignOutAlt />\r\n            <span>Çıkış Yap</span>\r\n          </button>\r\n        </nav>\r\n      </header>\r\n      \r\n      <main className=\"vehicle-gallery\">\r\n        {vehicles.map(vehicle => (\r\n          <div key={vehicle.id} className=\"vehicle-card-item\" onClick={() => openDetailsModal(vehicle.id)}>\r\n            <div className=\"card-image-container\">\r\n              <img \r\n                src={vehicle.photo_url ? `http://localhost:5000/${vehicle.photo_url}` : 'https://via.placeholder.com/400x300?text=Resim+Yok'} \r\n                alt={`${vehicle.brand} ${vehicle.model}`}\r\n              />\r\n            </div>\r\n            <div className=\"card-content\">\r\n              <div>\r\n                <h3 className=\"vehicle-title\">{vehicle.brand} {vehicle.model}</h3>\r\n                <p className=\"vehicle-specs\">{vehicle.year} • {vehicle.mileage?.toLocaleString('tr-TR')} km • {vehicle.fuel}</p>\r\n              </div>\r\n              <div className=\"price-tag\">\r\n                {parseFloat(vehicle.sale_price).toLocaleString('tr-TR', { style: 'currency', currency: 'TRY', minimumFractionDigits: 0, maximumFractionDigits: 0 })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </main>\r\n\r\n      {selectedVehicleForDetails && (\r\n        <VehicleDetailModal \r\n          vehicle={selectedVehicleForDetails} \r\n          closeModal={closeDetailsModal} \r\n          openChat={() => openChatModal(selectedVehicleForDetails)}\r\n        />\r\n      )}\r\n\r\n      {selectedVehicleForChat && (\r\n        <ChatModal \r\n          key={selectedVehicleForChat.id}\r\n          vehicle={selectedVehicleForChat} \r\n          closeModal={closeChatModal} \r\n        />\r\n      )}\r\n\r\n      {isConversationsModalOpen && (\r\n        <UserConversationsModal \r\n            closeModal={() => setIsConversationsModalOpen(false)}\r\n            openChatForVehicle={openChatFromConversations}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// VehicleDetailModal bileşeni olduğu gibi kalabilir...\r\nfunction VehicleDetailModal({ vehicle, closeModal, openChat }) {\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n\r\n  const nextImage = (e) => {\r\n    e.stopPropagation();\r\n    setCurrentImageIndex(prev => (prev === vehicle.photos.length - 1 ? 0 : prev + 1));\r\n  };\r\n  const prevImage = (e) => {\r\n    e.stopPropagation();\r\n    setCurrentImageIndex(prev => (prev === 0 ? vehicle.photos.length - 1 : prev - 1));\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal-overlay\" onClick={closeModal}>\r\n      <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n        <button className=\"modal-close-btn\" onClick={closeModal}>×</button>\r\n        <div className=\"modal-body\">\r\n          <div className=\"modal-images-section\">\r\n            {vehicle.photos && vehicle.photos.length > 0 ? (\r\n              <div className=\"image-gallery\">\r\n                <div className=\"main-image-container\">\r\n                  <img src={`http://localhost:5000/${vehicle.photos[currentImageIndex].photo_url}`} alt=\"Ana Araç\" className=\"main-image\" />\r\n                  {vehicle.photos.length > 1 && (\r\n                    <>\r\n                      <button className=\"image-nav-btn prev\" onClick={prevImage}>‹</button>\r\n                      <button className=\"image-nav-btn next\" onClick={nextImage}>›</button>\r\n                    </>\r\n                  )}\r\n                </div>\r\n                {vehicle.photos.length > 1 && (\r\n                  <div className=\"thumbnail-container\">\r\n                    {vehicle.photos.map((photo, index) => (\r\n                      <img key={photo.id} src={`http://localhost:5000/${photo.photo_url}`} alt={`Thumbnail ${index + 1}`}\r\n                           className={`thumbnail ${index === currentImageIndex ? 'active' : ''}`}\r\n                           onClick={(e) => { e.stopPropagation(); setCurrentImageIndex(index); }} />\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : <p>Bu araç için fotoğraf bulunmamaktadır.</p>}\r\n          </div>\r\n          <div className=\"modal-info-section\">\r\n            <h2 className=\"vehicle-modal-title\">{vehicle.brand} {vehicle.model}</h2>\r\n            <div className=\"vehicle-details-grid\">\r\n              <div className=\"detail-item\"><span className=\"detail-label\">Yıl:</span><span className=\"detail-value\">{vehicle.year}</span></div>\r\n              <div className=\"detail-item\"><span className=\"detail-label\">Kilometre:</span><span className=\"detail-value\">{vehicle.mileage?.toLocaleString('tr-TR')} km</span></div>\r\n              <div className=\"detail-item\"><span className=\"detail-label\">Yakıt:</span><span className=\"detail-value\">{vehicle.fuel}</span></div>\r\n              <div className=\"detail-item\"><span className=\"detail-label\">Vites:</span><span className=\"detail-value\">{vehicle.gear}</span></div>\r\n            </div>\r\n            <div className=\"price-section\">\r\n              <span className=\"price-label\">Satış Fiyatı</span>\r\n              <span className=\"price-value\">{parseFloat(vehicle.sale_price).toLocaleString('tr-TR', { style: 'currency', currency: 'TRY' })}</span>\r\n            </div>\r\n            {vehicle.description && (\r\n              <div className=\"description-section\">\r\n                <h4>Açıklama</h4><p>{vehicle.description}</p>\r\n              </div>\r\n            )}\r\n            <button className=\"message-action-button\" onClick={openChat}>\r\n              Satıcı ile Canlı Mesajlaşma\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HomePage;"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC/D,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,SAAS,QAAQ,YAAY;AACtC,OAAO,gBAAgB;AACvB,OAAOC,SAAS,MAAM,aAAa;AACnC,SAASC,MAAM,QAAQ,UAAU;AACjC,SAASC,YAAY,EAAEC,WAAW,EAAEC,UAAU,EAAEC,YAAY,QAAQ,gBAAgB;AACpF,OAAOC,sBAAsB,MAAM,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE9D,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EAClB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGpB,QAAQ,CA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}